# ë°±ì—”ë“œ API ë¬¸ì„œ

CampStation ë°±ì—”ë“œ API ìŠ¤í™ ì •ë¦¬ (ì‹¤ì œ ì‘ë‹µ ê¸°ë°˜)

> **ì¤‘ìš”**: ì´ ë¬¸ì„œëŠ” ì‹¤ì œ ë°±ì—”ë“œ ì½”ë“œ(`backend/src/main/java/**/controller/`)ì™€ API ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.  
> í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì‹œ ì´ ë¬¸ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íƒ€ì…ì„ ì •ì˜í•˜ê³  APIë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.

## ê¸°ë³¸ ì •ë³´

- **Base URL**: `http://localhost:8080/api`
- **ì‘ë‹µ í˜•ì‹**: JSON
- **ê³µí†µ ì‘ë‹µ êµ¬ì¡°**:

```json
{
  "success": true,
  "message": "ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": { ... },
  "timestamp": "2025-11-09T03:03:29.6966706"
}
```

## ë¬¸ì„œ êµ¬ì¡°

ê° ë„ë©”ì¸ë³„ë¡œ ìƒì„¸ ë¬¸ì„œê°€ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

### âœ… ì™„ì„±ëœ ë¬¸ì„œ

1. **[ì¸ì¦ API](./auth-api.md)** - ë¡œê·¸ì¸, íšŒì›ê°€ì…, í† í° ê´€ë¦¬, JWT ì¸ì¦
2. **[ìº í•‘ì¥ API](./campground-api.md)** - ìº í•‘ì¥ CRUD, ê²€ìƒ‰, ì¸ê¸° ìº í•‘ì¥, ì§€ë„ ì¡°íšŒ
3. **[ì‚¬ì´íŠ¸ API](./site-api.md)** - ì‚¬ì´íŠ¸ CRUD, í¸ì˜ì‹œì„¤(amenities) ê´€ë¦¬
4. **[ì˜ˆì•½ API](./reservation-api.md)** - íšŒì›/ë¹„íšŒì› ì˜ˆì•½, ì˜ˆì•½ ê´€ë¦¬, ìº˜ë¦°ë” ë‚ ì§œ ì¡°íšŒ
5. **[ë¦¬ë·° API](./review-api.md)** - ë¦¬ë·° ì‘ì„±, ì¡°íšŒ, í†µê³„, í‰ì  ë¶„í¬

### ğŸš§ ì‘ì„± ì˜ˆì •

- [ì‚¬ìš©ì API](./user-api.md) - ì‚¬ìš©ì ì •ë³´, í”„ë¡œí•„ ê´€ë¦¬
- [ì°œ API](./favorite-api.md) - ìº í•‘ì¥ ì°œí•˜ê¸°/ì·¨ì†Œ
- [ê²°ì œ API](./payment-api.md) - í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™, ê²°ì œ ì²˜ë¦¬
- [ì˜¤ë„ˆ API](./owner-api.md) - ìº í•‘ì¥ ì‚¬ì—…ì ì „ìš© ê¸°ëŠ¥
- [ê´€ë¦¬ì API](./admin-api.md) - ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥

## ì£¼ìš” íŠ¹ì§•

### 1. ê³µí†µ ì‘ë‹µ êµ¬ì¡°

ëª¨ë“  APIëŠ” `CommonResponse<T>` í˜•íƒœë¡œ ì‘ë‹µí•©ë‹ˆë‹¤:

```typescript
{
  success: boolean;
  message: string;
  data: T;
  timestamp: string;
}
```

### 2. í˜ì´ì§€ë„¤ì´ì…˜

ëª©ë¡ ì¡°íšŒ APIëŠ” `PageResponse<T>` í˜•íƒœë¡œ ì‘ë‹µí•©ë‹ˆë‹¤:

```typescript
{
  content: T[];
  pageNumber: number;
  pageSize: number;
  totalElements: number;
  totalPages: number;
  isLast: boolean;
}
```

### 3. ì¸ì¦ ë°©ì‹

- JWT í† í° ê¸°ë°˜ ì¸ì¦
- Access Token: 24ì‹œê°„ ìœ íš¨
- Refresh Token: HttpOnly ì¿ í‚¤ì— ì €ì¥
- Header: `Authorization: Bearer {token}`

### 4. ê¶Œí•œ ê´€ë¦¬

- **Public**: ì¸ì¦ ë¶ˆí•„ìš”
- **@Authenticated**: ë¡œê·¸ì¸ í•„ìš”
- **@OwnerOrAdmin**: ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥

## ë¹ ë¥¸ ì°¸ì¡°

### ìì£¼ ì‚¬ìš©í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸

| ê¸°ëŠ¥         | Method | Endpoint                       | ì¸ì¦ |
| ------------ | ------ | ------------------------------ | ---- |
| ë¡œê·¸ì¸       | POST   | `/v1/auth/login`               | âŒ   |
| ìº í•‘ì¥ ëª©ë¡  | GET    | `/v1/campgrounds`              | âŒ   |
| ìº í•‘ì¥ ìƒì„¸  | GET    | `/v1/campgrounds/{id}`         | âŒ   |
| ì‚¬ì´íŠ¸ ëª©ë¡  | GET    | `/v1/sites/by-campground/{id}` | âŒ   |
| ì˜ˆì•½ ìƒì„±    | POST   | `/v1/reservations`             | âœ…   |
| ë‚´ ì˜ˆì•½ ëª©ë¡ | GET    | `/v1/reservations/my`          | âœ…   |
| ë¦¬ë·° ì‘ì„±    | POST   | `/v1/reviews`                  | âœ…   |

## í™˜ê²½ ë³€ìˆ˜

```env
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080/api
```

## ì¤‘ìš” ì‚¬í•­

### Campground vs Site ì°¨ì´ì 

| í•­ëª©          | Campground (ìº í•‘ì¥)              | Site (ì‚¬ì´íŠ¸)         |
| ------------- | -------------------------------- | --------------------- |
| **amenities** | âŒ ì—†ìŒ                          | âœ… ìˆìŒ (ë°°ì—´)        |
| **ì´ë¯¸ì§€**    | thumbnailUrls, originalImageUrls | âŒ ì—†ìŒ               |
| **ê°€ê²©**      | âŒ ì—†ìŒ                          | basePrice             |
| **íƒ€ì…**      | âŒ ì—†ìŒ                          | TENT/CARAVAN/GLAMPING |
| **ìˆ˜ìš©ì¸ì›**  | âŒ ì—†ìŒ                          | capacity              |

âš ï¸ **ì¤‘ìš”**: ìº í•‘ì¥ ìƒì„¸ í˜ì´ì§€ì— í¸ì˜ì‹œì„¤ì„ í‘œì‹œí•˜ë ¤ë©´ Sites APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì‚¬ì´íŠ¸ë“¤ì˜ amenitiesë¥¼ í†µí•©í•´ì•¼ í•©ë‹ˆë‹¤.

---

**ìµœì¢… ì—…ë°ì´íŠ¸:** 2025-11-09  
**ì‘ì„±ì:** GitHub Copilot  
**ê¸°ë°˜:** ì‹¤ì œ ë°±ì—”ë“œ API ì‘ë‹µ
