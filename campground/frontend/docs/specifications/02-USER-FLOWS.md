# 사용자 플로우

> 주요 시나리오별 사용자 여정

## 🎭 주요 페르소나

### 1. 신규 사용자 (New User)

- **목표**: 캠핑장 찾아서 예약하기
- **특성**: 앱 처음 사용, 회원가입 필요

### 2. 재방문 사용자 (Returning User)

- **목표**: 빠르게 캠핑장 찾고 예약
- **특성**: 이미 계정 있음, 이전 예약 내역 있음

### 3. 비회원 사용자 (Guest User)

- **목표**: 예약 내역 조회
- **특성**: 회원가입 없이 예약한 사용자

---

## 📍 Flow 1: 신규 회원가입 및 첫 예약

```
1. 앱 실행
   ↓
2. 홈 화면 (로그인 전)
   - 캠핑장 둘러보기 (로그인 없이 가능)
   - 로그인 버튼
   ↓
3. 회원가입 선택
   ↓
4. 회원가입 방법 선택
   a) 이메일 회원가입
      - 이메일, 비밀번호 입력
      - 약관 동의
      - 회원가입 완료
   b) 소셜 회원가입
      - 카카오/네이버/구글/페이스북 선택
      - OAuth 인증
      - 추가 정보 입력 (전화번호 등)
      - 회원가입 완료
   ↓
5. 자동 로그인
   ↓
6. 홈 화면 (로그인 후)
   - 캠핑장 검색/목록
   ↓
7. 캠핑장 선택
   ↓
8. 캠핑장 상세 정보 확인
   - 사진, 위치, 편의시설
   - 리뷰 확인
   ↓
9. "예약하기" 버튼 클릭
   ↓
10. 예약 정보 입력
    - 날짜 선택 (체크인/체크아웃)
    - 사이트 선택
    - 인원 선택
    ↓
11. 예약 옵션 선택
    - 추가 장비 대여
    - 특별 요청사항
    ↓
12. 예약 정보 확인
    - 총 금액 확인
    ↓
13. 결제 수단 선택
    - 토스 페이먼츠 연동
    - 카드/계좌이체/간편결제
    ↓
14. 결제 완료
    ↓
15. 예약 완료 화면
    - 예약 번호 표시
    - 예약 상세 내역
    - QR 코드 (체크인용)
    ↓
16. 알림: 예약 확인 메시지
```

---

## 📍 Flow 2: 재방문 사용자의 빠른 예약

```
1. 앱 실행
   ↓
2. 자동 로그인 (토큰 유지)
   ↓
3. 홈 화면
   ↓
4. 방법 A: 지도에서 검색
   - 지도 탭 클릭
   - 현재 위치 주변 캠핑장 표시
   - 마커 클릭하여 간단 정보
   - 상세보기 클릭

   방법 B: 검색/필터
   - 검색 바에 지역/키워드 입력
   - 필터 적용 (가격, 시설, 테마)
   - 정렬 (인기순/가격순)
   - 목록에서 선택

   방법 C: 찜 목록
   - 마이페이지 → 찜 목록
   - 저장된 캠핑장 선택
   ↓
5. 캠핑장 상세 화면
   ↓
6. (Flow 1의 9-16단계와 동일)
```

---

## 📍 Flow 3: 예약 내역 확인 및 관리

```
1. 앱 실행 (로그인 상태)
   ↓
2. 하단 탭: "예약" 클릭
   ↓
3. 예약 내역 목록
   - 탭: [예정된 예약] [이용 완료] [취소됨]
   ↓
4. 예약 선택
   ↓
5. 예약 상세 화면
   - 예약 정보 (캠핑장, 날짜, 사이트)
   - 결제 정보
   - QR 코드
   - 캠핑장 전화걸기
   - 위치 보기
   ↓
6. 액션 선택
   a) 예약 변경
      - 날짜 변경
      - 사이트 변경
      - 추가 결제 (가격 차이)

   b) 예약 취소
      - 취소 정책 확인
      - 환불 금액 확인
      - 취소 사유 선택
      - 취소 완료

   c) 리뷰 작성 (이용 완료 후)
      - 별점 선택
      - 리뷰 텍스트 입력
      - 사진 업로드
      - 리뷰 등록
```

---

## 📍 Flow 4: 비회원 예약 조회

```
1. 앱 실행
   ↓
2. 홈 화면
   ↓
3. "비회원 예약 조회" 버튼 클릭
   ↓
4. 조회 정보 입력
   - 예약번호 입력
   - 예약자 이메일 입력
   ↓
5. 조회 결과
   - 예약 상세 정보
   - QR 코드
   ↓
6. 가능한 액션
   - 예약 취소
   - 위치 보기
   - 캠핑장 전화걸기
```

---

## 📍 Flow 5: 지도에서 캠핑장 찾기

```
1. 앱 실행
   ↓
2. 하단 탭: "지도" 클릭
   ↓
3. 네이버 맵 화면
   - 현재 위치 표시
   - 주변 캠핑장 마커 표시
   ↓
4. 지도 인터랙션
   a) 지도 이동/줌
      - 이동 후 "이 지역 재검색" 버튼

   b) 마커 클릭
      - 캠핑장 이름, 가격
      - "상세보기" 버튼

   c) 현재 위치 버튼
      - 내 위치로 이동
   ↓
5. 필터 버튼 클릭 (옵션)
   - 가격대
   - 시설
   - 테마
   - 평점
   ↓
6. 마커 선택 → 상세 화면
   ↓
7. (예약 플로우 진행)
```

---

## 📍 Flow 6: 찜하기 및 관리

```
1. 캠핑장 목록 or 상세 화면
   ↓
2. 하트 아이콘 클릭
   ↓
3. 찜 추가 (로그인 필요)
   - 로그인 안된 경우 → 로그인 화면
   - 로그인 후 자동 찜 추가
   ↓
4. 찜 목록 확인
   - 마이페이지 → 찜 목록
   ↓
5. 찜 관리
   - 찜 제거
   - 바로 예약하기
```

---

## 📍 Flow 7: 소셜 로그인

```
1. 로그인 화면
   ↓
2. 소셜 로그인 버튼 선택
   - [카카오로 시작하기]
   - [네이버로 시작하기]
   - [구글로 시작하기]
   - [페이스북으로 시작하기]
   ↓
3. OAuth 인증 화면 (각 플랫폼)
   - 계정 선택/로그인
   - 권한 동의
   ↓
4. 추가 정보 입력 (최초 가입 시)
   - 전화번호
   - 마케팅 수신 동의
   ↓
5. 로그인 완료
   ↓
6. 홈 화면
```

---

## 📍 Flow 8: 리뷰 작성 및 조회

```
1. 리뷰 작성 진입점
   a) 예약 내역 → 이용 완료 → 리뷰 작성
   b) 캠핑장 상세 → 리뷰 섹션 → 리뷰 쓰기
   ↓
2. 리뷰 작성 화면
   - 별점 선택 (1-5)
   - 텍스트 입력
   - 사진 업로드 (최대 5장)
   ↓
3. 리뷰 등록
   ↓
4. 리뷰 완료
   - 포인트 적립 (옵션)
   ↓
5. 리뷰 조회
   - 캠핑장 상세 → 리뷰 섹션
   - 최신순/평점순 정렬
   - 사진 리뷰만 보기
   ↓
6. 내 리뷰 관리
   - 마이페이지 → 내 리뷰
   - 수정/삭제
```

---

## 🚨 에러 시나리오

### 예약 실패

```
예약하기 → 결제 진행 → [결제 실패]
↓
에러 메시지 표시
- "결제에 실패했습니다"
- 재시도 버튼
- 다른 결제 수단 선택
```

### 토큰 만료

```
앱 사용 중 → [토큰 만료]
↓
자동 로그아웃
↓
로그인 화면 표시
- "세션이 만료되었습니다. 다시 로그인해주세요."
```

### 네트워크 오류

```
API 호출 → [네트워크 오류]
↓
에러 화면 표시
- "인터넷 연결을 확인해주세요"
- 재시도 버튼
```

---

## 📱 화면 전환 패턴

### 네비게이션 타입

1. **Push** (뒤로가기 가능)
   - 목록 → 상세
   - 검색 → 결과
2. **Modal** (닫기로 복귀)
   - 필터 설정
   - 결제 화면
   - 리뷰 작성

3. **Replace** (뒤로가기 불가)
   - 로그인 → 홈
   - 회원가입 완료 → 홈

4. **Tab Switch** (하단 탭)
   - 홈 ↔ 지도 ↔ 예약 ↔ 마이페이지

---

**마지막 업데이트**: 2025-11-09
